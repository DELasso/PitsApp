<div class="image-upload-container">
    <label class="image-upload-label">
        {{ label }}
        <span *ngIf="required" class="required">*</span>
    </label>

    <div class="image-upload-area" [class.dragover]="isDragOver" (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)" (drop)="onDrop($event)" (click)="fileInput.click()">

        <input #fileInput type="file" accept="image/*" multiple (change)="onFileSelected($event)"
            style="display: none;">

        <div class="upload-content">
            <i class="fa-solid fa-cloud-upload-alt upload-icon"></i>
            <p class="upload-text">
                Arrastra imágenes aquí o <span class="link">haz clic para seleccionar</span>
            </p>
            <p class="upload-hint">
                Máximo 5 imágenes • PNG, JPG, GIF, WebP • Máximo 5MB por imagen
            </p>
        </div>
    </div>

    <!-- Preview de imágenes -->
    <div *ngIf="imageUrls.length > 0" class="image-preview-grid">
        <div *ngFor="let url of imageUrls; let i = index" class="image-preview-item">
            <img [src]="getImageUrl(url)" [alt]="'Imagen ' + (i + 1)" class="preview-image">
            <button type="button" class="remove-image-btn" (click)="removeImage(i)" title="Eliminar imagen">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Estado de carga -->
    <div *ngIf="isUploading" class="upload-status">
        <div class="loading-spinner"></div>
        <span>Subiendo imágenes...</span>
    </div>

    <!-- Mensajes de error -->
    <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
    </div>
</div>